<!DOCTYPE html>
<html lang="vi">
  <head>
    <% include ../partials/head %>
    <title>Chi ti·∫øt</title>
    <% include ../partials/sdk %>
  </head>
  <body>
    <% include ../partials/header %>
    <main>
      <section class="container">
        <button
          type="button"
          class="btn btn-link p-0"
          onclick="window.history.back()"
        >
          ‚¨Ö Quay l·∫°i
        </button>

        <img class="w-100" id="detail-imageMain" />
        <hr />
        <p id="detail-name"></p>
        <p id="detail-price" class="text-primary"></p>
        <h6>
          Danh m·ª•c
          <span id="detail-category" class="badge badge-info ml-3"></span>
        </h6>
        <h6>
          Th∆∞∆°ng hi·ªáu
          <span id="detail-brand" class="badge badge-info ml-3"></span>
        </h6>
        <div id="detail-attribute">
          <span class="badge badge-info">attribute</span>
        </div>
        <hr />
        <div>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="basic-addon1">üì≤</span>
            </div>
            <input
              id="customer-phone"
              type="text"
              class="form-control"
              placeholder="S·ªë ƒëi·ªán tho·∫°i..."
              aria-label="S·ªë ƒëi·ªán tho·∫°i..."
              aria-describedby="basic-addon1"
            />
          </div>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="basic-addon1">üñä</span>
            </div>
            <input
              id="customer-name"
              type="text"
              class="form-control"
              placeholder="H·ªç t√™n..."
              aria-label="H·ªç t√™n..."
              aria-describedby="basic-addon1"
            />
          </div>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="basic-addon1">üìç</span>
            </div>
            <input
              id="customer-address"
              type="text"
              class="form-control"
              placeholder="ƒê·ªãa ch·ªâ..."
              aria-label="ƒê·ªãa ch·ªâ..."
              aria-describedby="basic-addon1"
            />
          </div>
          <div class="btn-group w-100" role="group" aria-label="Basic example">
            <button
              id="customer-order"
              type="button"
              class="btn btn-outline-primary"
            >
              ƒê·∫∑t h√†ng
            </button>
            <button
              type="button"
              class="btn btn-outline-primary"
              onclick="send()"
            >
              T∆∞ v·∫•n
            </button>
          </div>
          <script>
            let customer = new Customers({
              name: "customer-name",
              phone: "customer-phone",
              address: "customer-address",
              order: "customer-order"
            });
          </script>
        </div>
        <hr />
        <span class="badge badge-secondary my-3">M√¥ t·∫£</span>
        <p id="detail-description"></p>
        <hr />
        <span class="badge badge-secondary my-3">H∆∞·ªõng d·∫´n</span>
        <p id="detail-guide"></p>
        <hr />
        <span class="badge badge-secondary my-3">Chi ti·∫øt</span>
        <img id="detail-info" />
        <script>
          let detail = new Details({
            name: "detail-name",
            price: "detail-price",
            categoryName: "detail-category",
            brandName: "detail-brand",
            attributeName: "detail-attribute",
            imageMain: "detail-imageMain",
            imageOrthers: "detail-imageMore",
            description: "detail-description",
            detail: "detail-info",
            guide: "detail-guide"
          });

          if (condition.detail) {
            var message;
            detail
              .load({
                condition: `url: "${condition.detail}"`
              })
              .then(kj34hjkgf => {
                message = {
                  attachment: {
                    type: "template",
                    payload: {
                      template_type: "generic",
                      elements: [
                        {
                          title: kj34hjkgf.name,
                          image_url:
                            window.location.origin +
                            kj34hjkgf.images[0].file.publicUrl,
                          subtitle: kj34hjkgf.price,
                          default_action: {
                            type: "web_url",
                            url:
                              window.location.origin +
                              window.location.pathname +
                              window.location.search
                          },
                          buttons: [
                            {
                              type: "web_url",
                              url:
                                window.location.origin +
                                "/" +
                                window.location.pathname.split("/")[1] +
                                "?category=" +
                                kj34hjkgf.category.url,
                              title: "Xem th√™m"
                            }
                          ]
                        }
                      ]
                    }
                  }
                };
                console.log(message);
              });
          }
          function send() {
            console.log("send to messenger");
            MessengerExtensions.beginShareFlow(
              function(share_response) {
                // User dismissed without error, but did they share the message?
                if (share_response.is_sent) {
                  console.log("g·ª≠i th√†nh c√¥ng!");
                }
              },
              function(errorCode, errorMessage) {
                console.log(errorCode, errorMessage);
              },
              message,
              "broadcast"
            );
          }
        </script>
      </section>
    </main>
    <!-- <script>
      /* INIT */

      const bestSeller = new Products({ id: "bestSeller-products" });
      search.limit = 12;
      
      let brands = new Brands({ id: "brands" });
      let categoriesNav = new Categories({ id: "categories-navbar" });
      let banners = new Banners({ id: "banners" });
   

      let gobackBtn = document.getElementById("go-back");

      banners.load({ condition: `` });
      categoriesNav.load({ condition: `` });
      brands.load({ condition: `` });
     
     
      
      if (gobackBtn) {
        gobackBtn.onclick = () => {
          window.history.back();
        };
      }
      /* EVENT */

      /* SMOOTH */

      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function(e) {
          e.preventDefault();

          document.querySelector(this.getAttribute("href")).scrollIntoView({
            behavior: "smooth"
          });
        });
      });
      
    </script> -->
  </body>
</html>
