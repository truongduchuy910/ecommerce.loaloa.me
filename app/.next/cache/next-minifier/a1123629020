{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{\"/ZiB\":function(t,e,n){\"use strict\";var o=n(\"Fcif\"),a=n(\"dV/x\"),r=n(\"mXGw\"),i=(n(\"W0B4\"),n(\"PDtE\")),s=n(\"gbh0\"),c=n(\"mxPc\"),l={h1:\"h1\",h2:\"h2\",h3:\"h3\",h4:\"h4\",h5:\"h5\",h6:\"h6\",subtitle1:\"h6\",subtitle2:\"h6\",body1:\"p\",body2:\"p\"},u=r.forwardRef((function(t,e){var n=t.align,s=void 0===n?\"inherit\":n,u=t.classes,p=t.className,d=t.color,m=void 0===d?\"initial\":d,g=t.component,h=t.display,b=void 0===h?\"initial\":h,f=t.gutterBottom,y=void 0!==f&&f,v=t.noWrap,w=void 0!==v&&v,x=t.paragraph,O=void 0!==x&&x,C=t.variant,j=void 0===C?\"body1\":C,k=t.variantMapping,E=void 0===k?l:k,N=Object(a.a)(t,[\"align\",\"classes\",\"className\",\"color\",\"component\",\"display\",\"gutterBottom\",\"noWrap\",\"paragraph\",\"variant\",\"variantMapping\"]),M=g||(O?\"p\":E[j]||l[j])||\"span\";return r.createElement(M,Object(o.a)({className:Object(i.a)(u.root,p,\"inherit\"!==j&&u[j],\"initial\"!==m&&u[\"color\".concat(Object(c.a)(m))],w&&u.noWrap,y&&u.gutterBottom,O&&u.paragraph,\"inherit\"!==s&&u[\"align\".concat(Object(c.a)(s))],\"initial\"!==b&&u[\"display\".concat(Object(c.a)(b))]),ref:e},N))}));e.a=Object(s.a)((function(t){return{root:{margin:0},body2:t.typography.body2,body1:t.typography.body1,caption:t.typography.caption,button:t.typography.button,h1:t.typography.h1,h2:t.typography.h2,h3:t.typography.h3,h4:t.typography.h4,h5:t.typography.h5,h6:t.typography.h6,subtitle1:t.typography.subtitle1,subtitle2:t.typography.subtitle2,overline:t.typography.overline,srOnly:{position:\"absolute\",height:1,width:1,overflow:\"hidden\"},alignLeft:{textAlign:\"left\"},alignCenter:{textAlign:\"center\"},alignRight:{textAlign:\"right\"},alignJustify:{textAlign:\"justify\"},noWrap:{overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\"},gutterBottom:{marginBottom:\"0.35em\"},paragraph:{marginBottom:16},colorInherit:{color:\"inherit\"},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorTextPrimary:{color:t.palette.text.primary},colorTextSecondary:{color:t.palette.text.secondary},colorError:{color:t.palette.error.main},displayInline:{display:\"inline\"},displayBlock:{display:\"block\"}}}),{name:\"MuiTypography\"})(u)},\"2vW9\":function(t,e,n){\"use strict\";var o=n(\"Fcif\"),a=n(\"dV/x\"),r=n(\"mXGw\"),i=(n(\"W0B4\"),n(\"PDtE\")),s=n(\"gbh0\"),c=n(\"mxPc\"),l=n(\"bJWG\"),u=r.forwardRef((function(t,e){var n=t.classes,s=t.className,u=t.color,p=void 0===u?\"primary\":u,d=t.position,m=void 0===d?\"fixed\":d,g=Object(a.a)(t,[\"classes\",\"className\",\"color\",\"position\"]);return r.createElement(l.a,Object(o.a)({square:!0,component:\"header\",elevation:4,className:Object(i.a)(n.root,n[\"position\".concat(Object(c.a)(m))],n[\"color\".concat(Object(c.a)(p))],s,\"fixed\"===m&&\"mui-fixed\"),ref:e},g))}));e.a=Object(s.a)((function(t){var e=\"light\"===t.palette.type?t.palette.grey[100]:t.palette.grey[900];return{root:{display:\"flex\",flexDirection:\"column\",width:\"100%\",boxSizing:\"border-box\",zIndex:t.zIndex.appBar,flexShrink:0},positionFixed:{position:\"fixed\",top:0,left:\"auto\",right:0,\"@media print\":{position:\"absolute\"}},positionAbsolute:{position:\"absolute\",top:0,left:\"auto\",right:0},positionSticky:{position:\"sticky\",top:0,left:\"auto\",right:0},positionStatic:{position:\"static\",transform:\"translateZ(0)\"},positionRelative:{position:\"relative\"},colorDefault:{backgroundColor:e,color:t.palette.getContrastText(e)},colorPrimary:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},colorSecondary:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText},colorInherit:{color:\"inherit\"},colorTransparent:{backgroundColor:\"transparent\",color:\"inherit\"}}}),{name:\"MuiAppBar\"})(u)},\"8NVm\":function(t,e,n){\"use strict\";var o=n(\"Fcif\"),a=n(\"dV/x\"),r=n(\"mK0O\"),i=n(\"mXGw\"),s=(n(\"W0B4\"),n(\"PDtE\")),c=n(\"gbh0\"),l=i.forwardRef((function(t,e){var n=t.classes,r=t.className,c=t.component,l=void 0===c?\"div\":c,u=t.disableGutters,p=void 0!==u&&u,d=t.variant,m=void 0===d?\"regular\":d,g=Object(a.a)(t,[\"classes\",\"className\",\"component\",\"disableGutters\",\"variant\"]);return i.createElement(l,Object(o.a)({className:Object(s.a)(n.root,n[m],r,!p&&n.gutters),ref:e},g))}));e.a=Object(c.a)((function(t){return{root:{position:\"relative\",display:\"flex\",alignItems:\"center\"},gutters:Object(r.a)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up(\"sm\"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),regular:t.mixins.toolbar,dense:{minHeight:48}}}),{name:\"MuiToolbar\"})(l)},\"9as9\":function(t,e,n){\"use strict\";n.r(e);var o=n(\"UrUy\"),a=n.n(o),r=n(\"mXGw\"),i=n.n(r),s=n(\"R82R\"),c=n(\"2vW9\"),l=n(\"I4Pu\"),u=n(\"8NVm\"),p=n(\"SMlj\"),d=n(\"2W1i\"),m=n.n(d),g=n(\"eUpb\");!function(){var t=new Error(\"Cannot find module '../components/messages/allMessages'\");throw t.code=\"MODULE_NOT_FOUND\",t}(),function(){var t=new Error(\"Cannot find module '../components/messages/createMessage'\");throw t.code=\"MODULE_NOT_FOUND\",t}();n(\"6M0/\");var h=n(\"OrM8\"),b=n(\"bBV7\"),f=n.n(b),y=i.a.createElement,v=Object(s.a)((function(t){return{text:{padding:t.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:t.spacing(2)},subheader:{backgroundColor:t.palette.background.paper},appBar:{top:\"auto\",bottom:0,backgroundColor:\"white\",boxShadow:\"none\"},toolbar:{padding:13,boder:\"none\"},grow:{flexGrow:1},fabButton:{position:\"absolute\",zIndex:1,top:-30,left:0,right:0,margin:\"0 auto\"}}})),w=\"query {\\n    allAdmins: allUsers(where: { isAdmin: true }) {\\n      id\\n    }\\n  }\",x=\"query($user: UserWhereInput) {\\n    allConversations(where: { members_some: $user }) {\\n      id\\n    }\\n  }\",O='query($conversation: ConversationWhereInput) {\\n    allMessages(orderBy: \"time_ASC\", where: { conversation: $conversation }) {\\n      seller {\\n        isCustomer\\n        isSupporter\\n        isAdmin\\n        email\\n        id\\n      }\\n      id\\n      text\\n      time\\n    }\\n  }',C=\"mutation($members: [UserWhereUniqueInput]) {\\n    createConversation(data: { members: { connect: $members } }) {\\n      id\\n    }\\n  }\";function j(t){var e=t.allConversations,n=t.allMessages,o=t.isAdmin,a=(t.isSupporter,v());return\"true\"==o&&f.a.push(\"/adminChat\"),y(g.a,null,y(h.a,{href:\"/\"},\"Quay l\\u1ea1i\"),y(i.a.Fragment,null,y(l.a,null),y(!function(){var t=new Error(\"Cannot find module '../components/messages/allMessages'\");throw t.code=\"MODULE_NOT_FOUND\",t}(),{allMessages:n,conversation:e[0],role:\"isCustomer\"}),y(c.a,{position:\"fixed\",className:a.appBar},y(u.a,{className:a.toolbar},y(!function(){var t=new Error(\"Cannot find module '../components/messages/createMessage'\");throw t.code=\"MODULE_NOT_FOUND\",t}(),{conversation:e[0]}),\"}\"))))}j.getInitialProps=function(t){var e,n,o,r,i,s,c,l,u,p,d,g,h;return a.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:return e=t.res,n=t.client,o=t.id,t.email,r=t.isAdmin,i=t.isSupporter,t.isCustomer,b.prev=1,b.next=4,a.a.awrap(n.request(x,{user:{id:o}}));case 4:if(s=b.sent,!(c=s.allConversations).length){b.next=13;break}return b.next=9,a.a.awrap(n.request(O,{conversation:{id:c[0].id}}));case 9:l=b.sent,u=l.allMessages,b.next=23;break;case 13:return b.next=15,a.a.awrap(n.request(w));case 15:return p=b.sent,(d=p.allAdmins).push({id:o}),b.next=20,a.a.awrap(n.request(C,{members:d}));case 20:g=b.sent,h=g.createConversation,c.push(h);case 23:return b.abrupt(\"return\",{allConversations:c,allMessages:u,isAdmin:r,isSupporter:i});case 26:b.prev=26,b.t0=b.catch(1),console.log(b.t0),m.a.remove(\"token\"),n.request(\"mutation {\\n      unauthenticateUser {\\n        success\\n      }\\n    }\"),e&&(e.writeHead(302,{Location:\"/login\"}),e.end());case 32:case\"end\":return b.stop()}}),null,null,[[1,26]])},e.default=Object(p.c)(j)},Dqgx:function(t,e,n){\"use strict\";function o(t,e){\"function\"===typeof t?t(e):t&&(t.current=e)}n.d(e,\"a\",(function(){return o}))},I4Pu:function(t,e,n){\"use strict\";var o=n(\"Fcif\"),a=n(\"mXGw\"),r=(n(\"W0B4\"),n(\"gbh0\")),i={WebkitFontSmoothing:\"antialiased\",MozOsxFontSmoothing:\"grayscale\",boxSizing:\"border-box\"},s=function(t){return Object(o.a)({color:t.palette.text.primary},t.typography.body2,{backgroundColor:t.palette.background.default,\"@media print\":{backgroundColor:t.palette.common.white}})};e.a=Object(r.a)((function(t){return{\"@global\":{html:i,\"*, *::before, *::after\":{boxSizing:\"inherit\"},\"strong, b\":{fontWeight:t.typography.fontWeightBold},body:Object(o.a)({margin:0},s(t),{\"&::backdrop\":{backgroundColor:t.palette.background.default}})}}}),{name:\"MuiCssBaseline\"})((function(t){var e=t.children,n=void 0===e?null:e;return t.classes,a.createElement(a.Fragment,null,n)}))},R82R:function(t,e,n){\"use strict\";var o=n(\"Fcif\"),a=n(\"Ns/9\"),r=n(\"qSp0\");e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)(t,Object(o.a)({defaultTheme:r.a},e))}},XJLb:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/customerChat\",function(){return n(\"9as9\")}])},jILc:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return g}));var o=n(\"mXGw\"),a=n(\"xARA\"),r=!0,i=!1,s=null,c={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,\"datetime-local\":!0};function l(t){t.metaKey||t.altKey||t.ctrlKey||(r=!0)}function u(){r=!1}function p(){\"hidden\"===this.visibilityState&&i&&(r=!0)}function d(t){var e=t.target;try{return e.matches(\":focus-visible\")}catch(n){}return r||function(t){var e=t.type,n=t.tagName;return!(\"INPUT\"!==n||!c[e]||t.readOnly)||(\"TEXTAREA\"===n&&!t.readOnly||!!t.isContentEditable)}(e)}function m(){i=!0,window.clearTimeout(s),s=window.setTimeout((function(){i=!1}),100)}function g(){return{isFocusVisible:d,onBlurVisible:m,ref:o.useCallback((function(t){var e,n=a.findDOMNode(t);null!=n&&((e=n.ownerDocument).addEventListener(\"keydown\",l,!0),e.addEventListener(\"mousedown\",u,!0),e.addEventListener(\"pointerdown\",u,!0),e.addEventListener(\"touchstart\",u,!0),e.addEventListener(\"visibilitychange\",p,!0))}),[])}}},q3GK:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return r}));var o=n(\"mXGw\"),a=n(\"Dqgx\");function r(t,e){return o.useMemo((function(){return null==t&&null==e?null:function(n){Object(a.a)(t,n),Object(a.a)(e,n)}}),[t,e])}}},[[\"XJLb\",0,1,3,2,4,5,6,7,8,9,11]]]);"}