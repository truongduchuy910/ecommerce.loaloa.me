{"ast":null,"code":"var _jsxFileName = \"/home/truongduchuy910/apps/loaloa.me/app/pages/login.js\";\nvar __jsx = React.createElement;\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport Layout from \"../src/Layout\";\nimport LightBoard from \"../src/LightBoard\";\nimport Link from \"../src/Link\";\nimport Logo from \"../src/logo\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Component } from \"react\";\nimport { FacebookProvider, Comments, CustomChat } from \"react-facebook\";\nimport { request } from \"graphql-request\";\nimport getGraphUri from \"../utils/getGraphUri\";\nimport { login } from \"../utils/auth\";\n\nfunction Login() {\n  let [username, setUserName] = useState(false);\n  let [password, setPassword] = useState(false);\n  let [buttonStatus, setButtonStatus] = useState(\"Đăng nhập\"); //---------------------------------------\n\n  async function loginButtonClick() {\n    setButtonStatus(\"Vui lòng đợi...\");\n\n    if (username.length > 5 && password.length > 5) {\n      let response = await request(getGraphUri(), `mutation($username: String, $password: String) {\n      authenticateUserWithPassword(email: $username, password: $password) {\n      token\n      item {\n          id\n          email\n          isAdmin\n          isSupporter\n          isCustomer\n      }\n      }}`, {\n        username,\n        password\n      });\n      let {\n        authenticateUserWithPassword\n      } = response;\n\n      if (authenticateUserWithPassword) {\n        let {\n          token,\n          item: {\n            id,\n            email,\n            isAdmin,\n            isSupporter,\n            isCustomer\n          }\n        } = authenticateUserWithPassword;\n        setButtonStatus(\"Đang điều hướng...!\");\n        login({\n          token,\n          id,\n          email,\n          isAdmin,\n          isSupporter,\n          isCustomer\n        });\n      } else {\n        setButtonStatus(\"Sai tên đăng nhập hoặc mật khẩu.\");\n      }\n    } else {\n      setButtonStatus(\"Kiểm tra và thử lại\");\n    }\n  }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, __jsx(Container, {\n    maxWidth: \"sm\",\n    style: {\n      padding: 8\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/truongduchuy910/apps/loaloa.me/app/pages/login.js"],"names":["Grid","TextField","Button","Container","Layout","LightBoard","Link","Logo","Typography","React","Component","FacebookProvider","Comments","CustomChat","request","getGraphUri","login","Login","username","setUserName","useState","password","setPassword","buttonStatus","setButtonStatus","loginButtonClick","length","response","authenticateUserWithPassword","token","item","id","email","isAdmin","isSupporter","isCustomer","padding"],"mappings":";;AAAA,OAAOA,IAAP,MAAiB,wBAAjB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,gBAAT,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,gBAAvD;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,SAASC,KAAT,QAAsB,eAAtB;;AACA,SAASC,KAAT,GAAiB;AACf,MAAI,CAACC,QAAD,EAAWC,WAAX,IAA0BC,QAAQ,CAAC,KAAD,CAAtC;AACA,MAAI,CAACC,QAAD,EAAWC,WAAX,IAA0BF,QAAQ,CAAC,KAAD,CAAtC;AACA,MAAI,CAACG,YAAD,EAAeC,eAAf,IAAkCJ,QAAQ,CAAC,WAAD,CAA9C,CAHe,CAIf;;AACA,iBAAeK,gBAAf,GAAkC;AAChCD,IAAAA,eAAe,CAAC,iBAAD,CAAf;;AACA,QAAIN,QAAQ,CAACQ,MAAT,GAAkB,CAAlB,IAAuBL,QAAQ,CAACK,MAAT,GAAkB,CAA7C,EAAgD;AAC9C,UAAIC,QAAQ,GAAG,MAAMb,OAAO,CAC1BC,WAAW,EADe,EAEzB;;;;;;;;;;SAFyB,EAa1B;AACEG,QAAAA,QADF;AAEEG,QAAAA;AAFF,OAb0B,CAA5B;AAmBA,UAAI;AAAEO,QAAAA;AAAF,UAAmCD,QAAvC;;AACA,UAAIC,4BAAJ,EAAkC;AAChC,YAAI;AACFC,UAAAA,KADE;AAEFC,UAAAA,IAAI,EAAE;AAAEC,YAAAA,EAAF;AAAMC,YAAAA,KAAN;AAAaC,YAAAA,OAAb;AAAsBC,YAAAA,WAAtB;AAAmCC,YAAAA;AAAnC;AAFJ,YAGAP,4BAHJ;AAIAJ,QAAAA,eAAe,CAAC,qBAAD,CAAf;AACAR,QAAAA,KAAK,CAAC;AAAEa,UAAAA,KAAF;AAASE,UAAAA,EAAT;AAAaC,UAAAA,KAAb;AAAoBC,UAAAA,OAApB;AAA6BC,UAAAA,WAA7B;AAA0CC,UAAAA;AAA1C,SAAD,CAAL;AACD,OAPD,MAOO;AACLX,QAAAA,eAAe,CAAC,kCAAD,CAAf;AACD;AACF,KA/BD,MA+BO;AACLA,MAAAA,eAAe,CAAC,qBAAD,CAAf;AACD;AACF;;AACD,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AAAW,IAAA,QAAQ,EAAC,IAApB;AAAyB,IAAA,KAAK,EAAE;AAAEY,MAAAA,OAAO,EAAE;AAAX,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AACD,eAAenB,KAAf","sourcesContent":["import Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport Layout from \"../src/Layout\";\nimport LightBoard from \"../src/LightBoard\";\nimport Link from \"../src/Link\";\nimport Logo from \"../src/logo\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Component } from \"react\";\nimport { FacebookProvider, Comments, CustomChat } from \"react-facebook\";\nimport { request } from \"graphql-request\";\nimport getGraphUri from \"../utils/getGraphUri\";\nimport { login } from \"../utils/auth\";\nfunction Login() {\n  let [username, setUserName] = useState(false);\n  let [password, setPassword] = useState(false);\n  let [buttonStatus, setButtonStatus] = useState(\"Đăng nhập\");\n  //---------------------------------------\n  async function loginButtonClick() {\n    setButtonStatus(\"Vui lòng đợi...\");\n    if (username.length > 5 && password.length > 5) {\n      let response = await request(\n        getGraphUri(),\n        `mutation($username: String, $password: String) {\n      authenticateUserWithPassword(email: $username, password: $password) {\n      token\n      item {\n          id\n          email\n          isAdmin\n          isSupporter\n          isCustomer\n      }\n      }}`,\n        {\n          username,\n          password\n        }\n      );\n\n      let { authenticateUserWithPassword } = response;\n      if (authenticateUserWithPassword) {\n        let {\n          token,\n          item: { id, email, isAdmin, isSupporter, isCustomer }\n        } = authenticateUserWithPassword;\n        setButtonStatus(\"Đang điều hướng...!\");\n        login({ token, id, email, isAdmin, isSupporter, isCustomer });\n      } else {\n        setButtonStatus(\"Sai tên đăng nhập hoặc mật khẩu.\");\n      }\n    } else {\n      setButtonStatus(\"Kiểm tra và thử lại\");\n    }\n  }\n  return (\n    <Layout>\n      <Container maxWidth=\"sm\" style={{ padding: 8 }}></Container>\n    </Layout>\n  );\n}\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}