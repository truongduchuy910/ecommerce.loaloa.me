{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { useState, useEffect } from \"react\";\nimport { gql, useQuery } from \"@apollo/client\";\nimport { useRouter } from \"next/router\";\nimport Logo from \"../src/logo\";\nconst query = gql`\n  query {\n    allUsers {\n      id\n      email\n    }\n  }\n`;\nconst useStyles = makeStyles(theme => ({\n  title: {\n    flexGrow: 1\n  },\n  appBar: {\n    marginBottom: theme.spacing(2)\n  }\n}));\nexport default function Navbar() {\n  const classes = useStyles();\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(query);\n  const shouldRedirect = !(loading || data);\n  const router = useRouter();\n  useEffect(() => {\n    if (shouldRedirect) {\n      router.push(\"/signin\");\n    }\n  }, [shouldRedirect]);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleLogout = () => {\n    router.push(\"/signout\");\n  };\n\n  const handleMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return __jsx(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, __jsx(Toolbar, null, __jsx(\"div\", {\n    style: {\n      width: 50,\n      marginRight: 15\n    }\n  }, __jsx(Logo, null)), __jsx(Typography, {\n    variant: \"h6\",\n    className: classes.title\n  }, \"Tuvilogic.com\"), (data === null || data === void 0 ? void 0 : data.allUsers) && !loading ? __jsx(\"div\", null, __jsx(IconButton, {\n    \"aria-label\": \"account of current user\",\n    \"aria-controls\": \"menu-appbar\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleMenu,\n    color: \"inherit\"\n  }, __jsx(AccountCircle, null)), __jsx(Menu, {\n    id: \"menu-appbar\",\n    anchorEl: anchorEl,\n    anchorOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    keepMounted: true,\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    open: open,\n    onClose: handleClose\n  }, __jsx(MenuItem, {\n    onClick: handleLogout\n  }, \" signout\"))) : __jsx(Skeleton, {\n    variant: \"rect\",\n    height: 20\n  })));\n}","map":null,"metadata":{},"sourceType":"module"}